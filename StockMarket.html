<!DOCTYPE HTML>
<html>
	<head>
		<title>Stockmarket Analysis for Multiple Stocks Using Python</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1>Stockmarket Analysis for Multiple Stocks Using Python</h1>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
				<nav id="menu">
					<div class="inner">
						<h2>Menu</h2>
						<ul class="links">
							<li><a href="index.html">Home</a></li>
							<li><a href="qualified_business_analyst.html">Qualified Business Analyst</a></li>
							<li><a href="#">Data Analyst Showcase</a></li>
							<ul><li><a href="Python_Showcases.html">Python Showcases</a></li>
								<li><a href="SQL_Showcases.html">SQL Showcases</a></li>
							</ul>
						</ul>
						<a href="#" class="close">Close</a>
					</div>
				</nav>

				<!-- Wrapper -->
					<section id="wrapper">
						<header>
							<div class="inner">
								<h2>Stockmarket Analysis for Multiple Stocks Using Python</h2>
								<p>On this page I will showcase my Python skills to investigate and manipulate data, specifically four stocks:
                                    Amazon (AMZN), Microsoft (MSFT), Google (GOOG), and Apple (AAPL), for a period of a year. I will also create
                                    three visualisations of the data, in the form of a candlestick graph, bar plot, and a line graph.
								</p>
							</div>
						</header>

						<!-- Content -->
							<div class="wrapper">
								<div class="inner">
									<section>
										<h3>The code at a glance</h3>
										<p><span class="image right"><pre>
import numpy as np
import yfinance as yf
import pandas as pd
from datetime import date, timedelta
import plotly.graph_objects as go
import plotly.express as px
                                           
today = date.today()
end_date = today.strftime("%Y-%m-%d")
start_date = (today - timedelta(days=365)).strftime("%Y-%m-%d")
                                     
stock_colors={'AAPL': 'green', 'GOOG': 'blue', 'MSFT': 'orange', 'AMZN': 'red'}
                                            
dfs = {}
for ticker, color in stock_colors.items():
    data = yf.download(ticker, start=start_date, end=end_date, progress=False).reset_index()
    data["Ticker"] = ticker
    data["Colour"] = color
    dfs[ticker] = data
                                            
data=pd.concat(list(dfs.values()), ignore_index=True)
                                            
#Creates a Candlestick Graph
figure = go.Figure()
                                            
for ticker in stock_colors.keys():
    subset = data[data['Ticker'] == ticker]
    color = stock_colors[ticker]
    figure.add_trace(go.Candlestick(x=subset['Date'],
                                    open=subset['Open'],
                                    high=subset['High'],
                                    low=subset['Low'],
                                    close=subset['Close'],
                                    increasing_line_color=color,
                                    decreasing_line_color=color,
                                    text=subset['Ticker'] + '<br>Open: ' + subset['Open'].astype(str) + 
                                                '<br>Close: ' + subset['Close'].astype(str) + 
                                                '<br>High: ' + subset['High'].astype(str) + 
                                                '<br>Low: ' + subset['Low'].astype(str), 
                                                hoverinfo='text', 
                                                name=ticker))  
                                            
    figure.update_layout(title = "Muliple Stock Price Analysis")
    figure.update_xaxes(title_text='Date')
    figure.update_yaxes(title_text='Stock Price (USD)')
                                            
#Creates a Bar Plot
figure2 = go.Figure()
for ticker in stock_colors.keys():
    subset = data[data['Ticker'] == ticker]
    color = stock_colors[ticker]
    figure2.add_trace(go.Bar(x=subset['Date'], 
                            y=subset['Close'], 
                            marker_color=color,
                            text=subset['Ticker'] + '<br>Close: ' + subset['Close'].astype(str),
                            hoverinfo='text',
                            name=ticker))
    figure2.update_layout(title = "Muliple Stock Price Analysis (Bar Plot)")
    figure2.update_xaxes(title_text='Date')
    figure2.update_yaxes(title_text='Closing Price (USD)')
                                            
#Creates a Line Graph
figure3=go.Figure()
for ticker, df in dfs.items():
    color = stock_colors[ticker]
    figure3.add_trace(go.Scatter(x=df['Date'],
                                y=df['Close'],
                                mode='lines',
                                line=dict(color=color),
                                text=df['Ticker'] + '<br>Close: ' + data['Close'].astype(str), 
                                hoverinfo='text', 
                                name=ticker))  
                                            
    figure3.update_xaxes(title_text='Date')
    figure3.update_yaxes(title_text="Close Price (USD)")
    figure3.update_layout(title_text='Stock Prices Line Graph')
                                            
    date_ranges = {
        '1 Month': 30,
        '3 Months': 90,
        '6 Months': 180,
        '1 Year': 365
    }
                                            
    updatemenus =[]
                                            
    for stock in stock_colors.keys():
        buttons = []
        for label, days in date_ranges.items():
            button = dict(label=label,
            method='relayout',
            args=[{'xaxis': {'range': [today - timedelta(days=days), today]}}])
        buttons.append(button)
                                            
        updatemenus.append(dict(type='buttons',
                                showactive=True,
                                buttons=buttons,
                                x=0.1,
                                xanchor='left',
                                y=1.15,
                                yanchor='top'))

    figure3.update_layout(updatemenus=updatemenus)
                                            
    figure.show()
    figure2.show()
    figure3.show()</pre></span></p>
									</section>
									
                                    <section></section>


					<!-- Footer -->
					<section id="footer">
						<div class="inner">
							<h2 class="major">Get in touch</h2>
							<p>If you are interested in my skillset and wish to get in touch, please find my details below</p>
							<ul class="contact">
								<li class="icon solid fa-phone">(+44) 7727899527</li>
								<li class="icon solid fa-envelope"><a href="#">danielsmith77@btinternet.com</a></li>
								<li class="icon brands fa-linkedin"><a href="www.linkedin.com/in/daniel-smith-a9470b159"></a>LinkedIn</li>
								<li class="icon brands fa-facebook-f"><a href="https://www.facebook.com/profile.php?id=1460064952"></a>Facebook</li>
								<li class="icon business fa-file-alt"><a href="CV.docx">CV</a></li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>